!function(a,b){"use strict";var c=(angular.module("audio",["ngRoute","audiolistControllers"]),angular.module("audiolistControllers",["ngRoute"]));c.controller("audiolist-ctrl",["$scope","$http","audioListService","$sce","$timeout",function(b,c,d,e,f){function g(a){var c=document.getElementsByClassName("wavesurfer"),d=angular.element(c);d[0].innerHTML="",b.wavesurfer=Object.create(WaveSurfer),b.wavesurfer.init({container:d[0],backend:"MediaElement",height:90,progressColor:"#e5a213",waveColor:"#e5c513",cursorColor:"#f8bf43"}),b.wavesurfer.load(a),b.$emit("playerPressed",b.wavesurfer)}function h(a){var b=document.getElementById("audio-ctrls-"+a);return b=angular.element(b),parseFloat(b.attr("data-current-time"))}function i(a){v=document.getElementById("timeline-"+a),y=document.getElementById("playhead-"+a),x=document.getElementById("line-"+a),w=v.offsetWidth-y.offsetWidth}function j(a){var b=document.getElementById("audio-ctrls-"+a);b=angular.element(b),u=b.attr("data-duration")}function k(a,b){var c=document.getElementById("audio-ctrls-"+b);c=angular.element(c),c.attr("data-current-time",a)}function l(a,c){var d=document.getElementById("audio-ctrls-"+a);d=angular.element(d),d.attr("data-current-time",c),c>u&&(c=u-.2),t&&a==r&&b.wavesurfer.play(c)}function m(c){var d=w*(b.wavesurfer.getCurrentTime()/u);y.style.marginLeft=d+"px",a("#line-"+r).width(d)}function n(a){var b=document.getElementById("play-"+a),c=angular.element(b);c.toggleClass("hide");var d=document.getElementById("pause-"+a),e=angular.element(d);e.toggleClass("hide")}function o(a){return(a.pageX-v.getBoundingClientRect().left)/w}function p(b){var c=b.pageX-v.getBoundingClientRect().left;c>=0&&w>=c&&(y.style.marginLeft=c+"px",a("#line-"+s).width(c)),0>c&&(y.style.marginLeft="0px",a("#line-"+s).width(0)),c>w&&(y.style.marginLeft=w+"px",a("#line-"+s).width(w))}var q=null,r=null,s=null,t=!1;b.wavesurfer,b.audioList=d.getAudioList();var u,v,w,x,y,z=!1,u=0,A=0;b.activatePlayhead=function(a,b){z||(i(a),j(a)),z=!0},b.deactivatePlayhead=function(a,b){z=!1},b.timeLineClick=function(a,c){t&&a!=r&&b.pause(r),i(a),f(function(){p(c),j(a),A=u*o(c),l(a,A)},1)},b.dragPlayhead=function(a,b){z&&p(b)},b.trustSrc=function(a){return e.trustAsResourceUrl(a)},b.play=function(a,c,d){t&&n(r),c!=r&&null!=r&&k(b.wavesurfer.getCurrentTime(),r),q=a,r=c,n(r),g(q),b.wavesurfer.play(h(c))},b.$on("playerPressed",function(a,c){b.wavesurfer.on("play",function(){t=!0,i(r),j(r),b.wavesurfer.on("audioprocess",m,!1)}),b.wavesurfer.on("pause",function(){t=!1}),b.wavesurfer.on("finish",function(){t=!1,b.wavesurfer.seekTo(0),l(r,0),n(r),b.$apply()})}),b.pause=function(a){b.wavesurfer&&(k(b.wavesurfer.getCurrentTime(),r),n(a),b.wavesurfer.pause())},b.fastForward=function(a){b.wavesurfer&&a==r&&b.wavesurfer.skipForward()},b.fastBackward=function(a){b.wavesurfer&&a==r&&b.wavesurfer.skipBackward()}}]),c.directive("getDuration",["$timeout",function(a){return{restrict:"A",link:function(a,b,c){var d=new Audio(c.voicedemo);d.load(),d.addEventListener("loadedmetadata",function(){b.attr("data-duration",d.duration)},!1)}}}]),c.service("audioListService",function(){var a=[{id:1,audiourl:"upload/audio/audio-sample1.mp3",title:"title-1"},{id:2,audiourl:"upload/audio/audio-sample2.mp3",title:"title-2"},{id:3,audiourl:"upload/audio/audio-sample3.mp3",title:"title-3"},{id:4,audiourl:"upload/audio/audio-sample4.mp3",title:"title-4"}],b=function(b){a.push(b)},c=function(){return a},d=function(){return a.length};return{addAudio:b,getAudioList:c,countAudioList:d}})}(jQuery,window);
//# sourceMappingURL=audio-app.map