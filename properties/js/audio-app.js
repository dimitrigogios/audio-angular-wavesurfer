!function(a,b){"use strict";var c=(angular.module("audio",["ngRoute","audiolistControllers"]),angular.module("audiolistControllers",["ngRoute"]));c.controller("audiolist-ctrl",["$scope","$http","audioListService","$sce","$timeout",function(b,c,d,e,f){function g(a){var c=document.getElementsByClassName("wavesurfer"),d=angular.element(c);d[0].innerHTML="",b.wavesurfer=Object.create(WaveSurfer),b.wavesurfer.init({container:d[0],backend:"MediaElement",height:90,progressColor:"#e5a213",waveColor:"#e5c513",cursorColor:"#f8bf43"}),b.wavesurfer.load(a),b.$emit("playerPressed",b.wavesurfer)}function h(a){var b=document.getElementById("audio-ctrls-"+a);return b=angular.element(b),parseFloat(b.attr("data-current-time"))}function i(a){r=document.getElementById("timeline-"+a),u=document.getElementById("playhead-"+a),t=document.getElementById("line-"+a),s=r.offsetWidth-u.offsetWidth}function j(a){var b=document.getElementById("audio-ctrls-"+a);b=angular.element(b),q=b.attr("data-duration")}function k(a,b){var c=document.getElementById("audio-ctrls-"+b);c=angular.element(c),c.attr("data-current-time",a)}function l(a,c){var d=document.getElementById("audio-ctrls-"+a);d=angular.element(d),d.attr("data-current-time",c),c>q&&(c=q-.2),x&&a==w&&b.wavesurfer.play(c)}function m(c){var d=s*(b.wavesurfer.getCurrentTime()/q);u.style.marginLeft=d+"px",a("#line-"+w).width(d)}function n(a){var b=document.getElementById("play-"+a),c=angular.element(b);c.toggleClass("hide");var d=document.getElementById("pause-"+a),e=angular.element(d);e.toggleClass("hide")}function o(a){return(a.pageX-r.getBoundingClientRect().left)/s}function p(b,c){var d=c.pageX-r.getBoundingClientRect().left;d>=0&&s>=d&&(u.style.marginLeft=d+"px",a("#line-"+b).width(d)),0>d&&(u.style.marginLeft="0px",a("#line-"+b).width(0)),d>s&&(u.style.marginLeft=s+"px",a("#line-"+b).width(s))}var q,r,s,t,u,v=null,w=null,x=!1,y=!1,q=0,z=0;b.wavesurfer,b.audioList=d.getAudioList(),b.activatePlayhead=function(a,b){y||(i(a),j(a)),y=!0},b.deactivatePlayhead=function(a,b){y=!1},b.timeLineClick=function(a,c){x&&a!=w&&b.pause(w),i(a),f(function(){p(a,c),j(a),z=q*o(c),l(a,z)},1)},b.dragPlayhead=function(a,b){y&&p(a,b)},b.trustSrc=function(a){return e.trustAsResourceUrl(a)},b.play=function(a,c,d){x&&n(w),c!=w&&null!=w&&k(b.wavesurfer.getCurrentTime(),w),w=c,v=a,n(w),g(v),b.wavesurfer.play(h(c))},b.$on("playerPressed",function(a,c){b.wavesurfer.on("play",function(){x=!0,i(w),j(w),b.wavesurfer.on("audioprocess",m,!1)}),b.wavesurfer.on("pause",function(){x=!1}),b.wavesurfer.on("finish",function(){x=!1,b.wavesurfer.seekTo(0),l(w,0),n(w),b.$apply()})}),b.pause=function(a){b.wavesurfer&&(k(b.wavesurfer.getCurrentTime(),w),n(a),b.wavesurfer.pause())},b.fastForward=function(a){b.wavesurfer&&a==w&&b.wavesurfer.skipForward()},b.fastBackward=function(a){b.wavesurfer&&a==w&&b.wavesurfer.skipBackward()}}]),c.directive("getDuration",["$timeout",function(a){return{restrict:"A",link:function(a,b,c){var d=new Audio(c.voicedemo);d.load(),d.addEventListener("loadedmetadata",function(){b.attr("data-duration",d.duration)},!1)}}}]),c.service("audioListService",function(){var a=[{id:1,audiourl:"upload/audio/audio-sample1.mp3",title:"title-1"},{id:2,audiourl:"upload/audio/audio-sample2.mp3",title:"title-2"},{id:3,audiourl:"upload/audio/audio-sample3.mp3",title:"title-3"},{id:4,audiourl:"upload/audio/audio-sample4.mp3",title:"title-4"}],b=function(b){a.push(b)},c=function(){return a},d=function(){return a.length};return{addAudio:b,getAudioList:c,countAudioList:d}})}(jQuery,window);
//# sourceMappingURL=audio-app.map